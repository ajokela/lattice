#include "stackopcode.h"
#include <stddef.h>

static const char *names[] = {
    [OP_CONSTANT]      = "OP_CONSTANT",
    [OP_NIL]           = "OP_NIL",
    [OP_TRUE]          = "OP_TRUE",
    [OP_FALSE]         = "OP_FALSE",
    [OP_UNIT]          = "OP_UNIT",
    [OP_POP]           = "OP_POP",
    [OP_DUP]           = "OP_DUP",
    [OP_SWAP]          = "OP_SWAP",
    [OP_ADD]           = "OP_ADD",
    [OP_SUB]           = "OP_SUB",
    [OP_MUL]           = "OP_MUL",
    [OP_DIV]           = "OP_DIV",
    [OP_MOD]           = "OP_MOD",
    [OP_NEG]           = "OP_NEG",
    [OP_NOT]           = "OP_NOT",
    [OP_BIT_AND]       = "OP_BIT_AND",
    [OP_BIT_OR]        = "OP_BIT_OR",
    [OP_BIT_XOR]       = "OP_BIT_XOR",
    [OP_BIT_NOT]       = "OP_BIT_NOT",
    [OP_LSHIFT]        = "OP_LSHIFT",
    [OP_RSHIFT]        = "OP_RSHIFT",
    [OP_EQ]            = "OP_EQ",
    [OP_NEQ]           = "OP_NEQ",
    [OP_LT]            = "OP_LT",
    [OP_GT]            = "OP_GT",
    [OP_LTEQ]          = "OP_LTEQ",
    [OP_GTEQ]          = "OP_GTEQ",
    [OP_CONCAT]        = "OP_CONCAT",
    [OP_GET_LOCAL]     = "OP_GET_LOCAL",
    [OP_SET_LOCAL]     = "OP_SET_LOCAL",
    [OP_GET_GLOBAL]    = "OP_GET_GLOBAL",
    [OP_SET_GLOBAL]    = "OP_SET_GLOBAL",
    [OP_DEFINE_GLOBAL] = "OP_DEFINE_GLOBAL",
    [OP_GET_UPVALUE]   = "OP_GET_UPVALUE",
    [OP_SET_UPVALUE]   = "OP_SET_UPVALUE",
    [OP_CLOSE_UPVALUE] = "OP_CLOSE_UPVALUE",
    [OP_JUMP]          = "OP_JUMP",
    [OP_JUMP_IF_FALSE] = "OP_JUMP_IF_FALSE",
    [OP_JUMP_IF_TRUE]  = "OP_JUMP_IF_TRUE",
    [OP_JUMP_IF_NOT_NIL] = "OP_JUMP_IF_NOT_NIL",
    [OP_LOOP]          = "OP_LOOP",
    [OP_CALL]          = "OP_CALL",
    [OP_CLOSURE]       = "OP_CLOSURE",
    [OP_RETURN]        = "OP_RETURN",
    [OP_ITER_INIT]     = "OP_ITER_INIT",
    [OP_ITER_NEXT]     = "OP_ITER_NEXT",
    [OP_BUILD_ARRAY]   = "OP_BUILD_ARRAY",
    [OP_ARRAY_FLATTEN] = "OP_ARRAY_FLATTEN",
    [OP_BUILD_MAP]     = "OP_BUILD_MAP",
    [OP_BUILD_TUPLE]   = "OP_BUILD_TUPLE",
    [OP_BUILD_STRUCT]  = "OP_BUILD_STRUCT",
    [OP_BUILD_RANGE]   = "OP_BUILD_RANGE",
    [OP_BUILD_ENUM]    = "OP_BUILD_ENUM",
    [OP_INDEX]         = "OP_INDEX",
    [OP_SET_INDEX]     = "OP_SET_INDEX",
    [OP_GET_FIELD]     = "OP_GET_FIELD",
    [OP_SET_FIELD]     = "OP_SET_FIELD",
    [OP_INVOKE]        = "OP_INVOKE",
    [OP_INVOKE_LOCAL]  = "OP_INVOKE_LOCAL",
    [OP_INVOKE_GLOBAL] = "OP_INVOKE_GLOBAL",
    [OP_SET_INDEX_LOCAL] = "OP_SET_INDEX_LOCAL",
    [OP_PUSH_EXCEPTION_HANDLER] = "OP_PUSH_EXCEPTION_HANDLER",
    [OP_POP_EXCEPTION_HANDLER]  = "OP_POP_EXCEPTION_HANDLER",
    [OP_THROW]         = "OP_THROW",
    [OP_TRY_UNWRAP]    = "OP_TRY_UNWRAP",
    [OP_DEFER_PUSH]    = "OP_DEFER_PUSH",
    [OP_DEFER_RUN]     = "OP_DEFER_RUN",
    [OP_FREEZE]        = "OP_FREEZE",
    [OP_THAW]          = "OP_THAW",
    [OP_CLONE]         = "OP_CLONE",
    [OP_MARK_FLUID]    = "OP_MARK_FLUID",
    [OP_REACT]         = "OP_REACT",
    [OP_UNREACT]       = "OP_UNREACT",
    [OP_BOND]          = "OP_BOND",
    [OP_UNBOND]        = "OP_UNBOND",
    [OP_SEED]          = "OP_SEED",
    [OP_UNSEED]        = "OP_UNSEED",
    [OP_FREEZE_VAR]    = "OP_FREEZE_VAR",
    [OP_THAW_VAR]      = "OP_THAW_VAR",
    [OP_SUBLIMATE_VAR] = "OP_SUBLIMATE_VAR",
    [OP_SUBLIMATE]     = "OP_SUBLIMATE",
    [OP_PRINT]         = "OP_PRINT",
    [OP_IMPORT]        = "OP_IMPORT",
    [OP_SCOPE]         = "OP_SCOPE",
    [OP_SELECT]        = "OP_SELECT",
    [OP_INC_LOCAL]     = "OP_INC_LOCAL",
    [OP_DEC_LOCAL]     = "OP_DEC_LOCAL",
    [OP_ADD_INT]       = "OP_ADD_INT",
    [OP_SUB_INT]       = "OP_SUB_INT",
    [OP_MUL_INT]       = "OP_MUL_INT",
    [OP_LT_INT]        = "OP_LT_INT",
    [OP_LTEQ_INT]      = "OP_LTEQ_INT",
    [OP_LOAD_INT8]     = "OP_LOAD_INT8",
    [OP_CONSTANT_16]   = "OP_CONSTANT_16",
    [OP_GET_GLOBAL_16] = "OP_GET_GLOBAL_16",
    [OP_SET_GLOBAL_16] = "OP_SET_GLOBAL_16",
    [OP_DEFINE_GLOBAL_16] = "OP_DEFINE_GLOBAL_16",
    [OP_CLOSURE_16]    = "OP_CLOSURE_16",
    [OP_INVOKE_LOCAL_16]  = "OP_INVOKE_LOCAL_16",
    [OP_INVOKE_GLOBAL_16] = "OP_INVOKE_GLOBAL_16",
    [OP_RESET_EPHEMERAL] = "OP_RESET_EPHEMERAL",
    [OP_SET_LOCAL_POP] = "OP_SET_LOCAL_POP",
    [OP_CHECK_TYPE]    = "OP_CHECK_TYPE",
    [OP_CHECK_RETURN_TYPE] = "OP_CHECK_RETURN_TYPE",
    [OP_IS_CRYSTAL]    = "OP_IS_CRYSTAL",
    [OP_FREEZE_EXCEPT] = "OP_FREEZE_EXCEPT",
    [OP_FREEZE_FIELD]  = "OP_FREEZE_FIELD",
    [OP_HALT]          = "OP_HALT",
};

const char *opcode_name(Opcode op) {
    if ((size_t)op < sizeof(names) / sizeof(names[0]) && names[op])
        return names[op];
    return "OP_UNKNOWN";
}
